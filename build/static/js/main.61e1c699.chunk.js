(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{46:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(21),o=a.n(c),s=(a(46),a(15)),i=a(0),l=function(e){var t=e.image,a=e.price,r=e.id;return Object(i.jsxs)(s.b,{to:"/products/".concat(r),className:"h-40 rounded-xl hover:shadow-md relative cursor-pointer",children:[Object(i.jsx)("img",{className:"object-cover rounded-xl h-full w-full",src:t,alt:""}),Object(i.jsxs)("div",{className:"absolute bottom-2 left-2 bg-white rounded-full py-1 px-2 font-semibold text-sm",children:[a," TND"]})]})},u=a(3),d=a.n(u),p=a(7),b=a(8),j=a.n(b),f="LOGIN_SUCCESS",m="LOGIN_ERROR",h="REGISTER_SUCCESS",x="REGISTER_ERROR",O="AUTH_ERROR",v="USER_LOADED",g="LOGOUT",y="AUTH_LOADING",w="GET_PRODUCTS",N="GET_PRODUCTS_BY_CATEGORY",S="GET_PRODUCT",k="UPDATE_PRODUCT",C="FILTER_PRODUCT",E="CREATE_PRODUCT",R="PRODUCT_ERROR",_="GET_OWNED_PRODUCTS",P="PRODUCT_LOADING",T="DELETE_PRODUCT",D="GET_PRODUCT_SELLER_NUMBER",A="GET_CATEGORIES",I="CATEGORY_ERROR",F="CATEGORY_LOADING",U=a(6),G=function(){return Object(i.jsx)(r.Fragment,{children:Object(i.jsx)("div",{className:"w-full h-full top-0 left-0 fixed block bg-secondary opacity-100 z-50",children:Object(i.jsx)("span",{className:"opacity-100 block relative w-0 h-0 ",style:{top:"calc( 50% - ( 80px / 2) )",left:"calc( 50% - ( 80px / 2) )"},children:Object(i.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-5x text-primary-shade"})})})})},L={getProducts:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:P}),t.prev=1,t.next=4,j.a.get("/api/products?limit=".concat(e));case 4:r=t.sent,a({type:w,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:R,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},z=Object(U.b)((function(e){return{productState:e.productState,categoryState:e.categoryState,authState:e.authState}}),L)((function(e){var t=e.getProducts,a=e.productState,n=e.categoryState,c=e.authState;return Object(r.useEffect)((function(){t(10)}),[t]),a.loading&&n.loading&&c.loading?Object(i.jsx)(G,{}):Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"bg-warning",children:[Object(i.jsx)("h1",{className:"text-6xl text-center py-4",children:"Find things you'll love. Support independent sellers. Only on Etsy."}),Object(i.jsx)("div",{className:"flex justify-center items-center gap-8",children:n.categories.slice(0,5).map((function(e){return Object(i.jsxs)(s.b,{to:"/search?category=".concat(e.slug),className:"group cursor-pointer transform hover:scale-105 transition-transform duration-200 ease-in-out -mb-20",children:[Object(i.jsx)("img",{className:"w-28 h-28 rounded-full my-3 group-hover:shadow-xl transition-all duration-200 ease-in-out object-cover",src:e.image,alt:e.name}),Object(i.jsx)("div",{className:"capitalize text-center font-bold mb-2 text-main group-hover:text-opacity-80 border-b-2 border-solid border-transparent group-hover:border-main transition-all duration-200 ease-in-out",children:e.name})]},e._id)}))})]}),Object(i.jsx)("div",{className:"grid grid-cols-5 gap-4 mt-32",children:a.products.map((function(e){return Object(i.jsx)(l,{id:e._id,image:e.image,price:e.price},e._id)}))})]})})),M=a(5);var B=function(e){var t=e.image,a=e.name,r=e.price,n=e.seller,c=e.id;return Object(i.jsxs)(s.b,{to:"/products/".concat(c),className:"h-96 group",children:[Object(i.jsx)("img",{src:t,alt:a,className:"h-2/3 object-cover w-full group-hover:shadow-lg"}),Object(i.jsxs)("div",{className:"h-1/3",children:[Object(i.jsx)("div",{className:"text-lg",children:a}),Object(i.jsxs)("div",{className:"font-bold text-lg",children:[r," TND"]}),Object(i.jsxs)("div",{className:"text-sm uppercase",children:["Ad by ",n.firstName," ",n.lastName]})]})]})},Y={filterProduct:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:P}),r="?",e.forEach((function(e,t){r+=t+"="+e+"&"})),t.prev=3,t.next=6,j.a.get("/api/products/search".concat(r));case 6:n=t.sent,a({type:C,payload:n.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a({type:R,payload:t.t0});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}()}},q=Object(U.b)((function(e){return{productState:e.productState}}),Y)((function(e){var t=e.filterProduct,a=e.productState,n=function(){var e=Object(M.h)();return new URLSearchParams(e.search)}();return Object(r.useEffect)((function(){t(n)}),[n.get("q"),n.get("category")]),a.loading?Object(i.jsx)(G,{}):Object(i.jsx)("div",{className:"pb-20",children:Object(i.jsx)("div",{className:"grid grid-cols-4 gap-4",children:a.products.map((function(e){return Object(i.jsx)(B,{seller:e.seller,id:e._id,image:e.image,name:e.name,price:e.price},e._id)}))})})})),H=a(9),J=a(16),W=a(2),K=a(74),Q=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:F}),t.prev=1,t.next=4,j.a.get("/api/categories?limit=".concat(e));case 4:r=t.sent,a({type:A,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:I,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},V={createProduct:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:P}),r={headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,j.a.post("/api/products/",e,r);case 5:n=t.sent,a({type:E,payload:n.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:R,payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},updateProduct:function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(r){var n,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:P}),n={headers:{"Content-Type":"application/json"}},a.prev=2,a.next=5,j.a.put("/api/products/".concat(t),e,n);case 5:c=a.sent,r({type:k,payload:c.data}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),r({type:R,payload:a.t0});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()},getCategories:Q},X=Object(U.b)((function(e){return{categoryState:e.categoryState}}),V)((function(e){var t=e.closeModal,a=e.createProduct,n=e.updateProduct,c=e.getCategories,o=e.categoryState,s=e.method,l=e.data;Object(r.useEffect)((function(){c(10)}),[c]);var u=Object(r.useRef)(null),b=Object(r.useState)({name:l.name?l.name:"",image:l.image?l.image:"",description:l.description?l.description:"",price:l.price?l.price:"",category:l.category?l.category:""}),j=Object(H.a)(b,2),f=j[0],m=j[1],h=Object(r.useState)(null),x=Object(H.a)(h,2),O=x[0],v=x[1];Object(K.a)(u,(function(){t(!1)}));var g=function(e){m(Object(W.a)(Object(W.a)({},f),{},Object(J.a)({},e.target.name,e.target.value))),console.log(f)},y=function(){var e=Object(p.a)(d.a.mark((function e(r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),(c=new FormData).append("name",f.name),c.append("description",f.description),c.append("price",f.price),c.append("category",f.category),c.append("image",O),"post"!==s){e.next=12;break}return e.next=10,a(c);case 10:e.next=14;break;case 12:return e.next=14,n(c,l._id);case 14:t(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"fixed z-10 top-0 left-0 w-full h-full flex items-center justify-center overflow-y-auto bg-main bg-opacity-60",children:Object(i.jsx)("div",{ref:u,className:"bg-white w-1/3 relative rounded-xl p-4 ",children:Object(i.jsxs)("form",{onSubmit:function(e){return y(e)},children:[Object(i.jsxs)("div",{className:"flex w-full flex-col items-center justify-between gap-4 mb-6",children:[Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"name",children:"Name"}),Object(i.jsx)("input",{onChange:function(e){return g(e)},type:"text",name:"name",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Name",value:f.name})]}),Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"image",children:"Image"}),Object(i.jsx)("input",{onChange:function(e){return function(e){v(e.target.files[0]),m(Object(W.a)(Object(W.a)({},f),{},Object(J.a)({},e.target.name,e.target.value)))}(e)},type:"file",name:"image",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Image"})]}),Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"description",children:"Description"}),Object(i.jsx)("textarea",{onChange:function(e){return g(e)},type:"text",name:"description",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"description",value:f.description})]}),Object(i.jsxs)("div",{className:"w-full flex justify-between items-center gap-2",children:[Object(i.jsxs)("div",{className:"w-1/2",children:[Object(i.jsx)("label",{htmlFor:"price",children:"Price"}),Object(i.jsx)("input",{onChange:function(e){return g(e)},type:"number",min:0,name:"price",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"price",value:f.price})]}),Object(i.jsxs)("div",{className:"w-1/2",children:[Object(i.jsx)("label",{htmlFor:"category",children:"Category"}),Object(i.jsxs)("select",{className:"w-full capitalize border-black rounded focus:outline-none border-solid border py-2 px-4",name:"category",value:f.category,onChange:function(e){return g(e)},children:[Object(i.jsx)("option",{value:"",hidden:!0,children:"--Select Category"}),o.categories.map((function(e){return Object(i.jsx)("option",{className:"capitalize",value:e._id,children:e.name})}))]})]})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",className:"border-main border-2 bg-main py-2 px-6 rounded-full transition-all duration-200 ease-in-out w-full text-white font-bold hover:opacity-95 transform hover:scale-105",children:"Create"})})]})})})})),Z={deleteProduct:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:P}),t.prev=1,t.next=4,j.a.delete("/api/products/".concat(e));case 4:r=t.sent,a({type:T,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:R,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},$=Object(U.b)(null,Z)((function(e){var t=e.data,a=e.deleteProduct,n=Object(r.useState)(!1),c=Object(H.a)(n,2),o=c[0],s=c[1];return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{className:"h-96 group",children:[Object(i.jsx)("img",{src:t.image,alt:t.name,className:"h-2/4 object-cover w-full group-hover:shadow-lg"}),Object(i.jsxs)("div",{className:"h-1/4",children:[Object(i.jsx)("div",{className:"text-lg",children:t.name}),Object(i.jsxs)("div",{className:"font-bold text-lg",children:[t.price," TND"]})]}),Object(i.jsxs)("div",{className:"flex justify-between gap-4 items-center",children:[Object(i.jsx)("button",{onClick:function(e){return s(!0)},type:"button",className:" capitalize text-sm bg-main py-1 px-4 rounded-full transition-all duration-200 ease-in-out w-full text-white font-bold hover:opacity-95 transform hover:scale-105",children:"update"}),Object(i.jsx)("button",{onClick:function(e){return a(t._id)},type:"button",className:" capitalize text-sm bg-danger py-1 px-4 rounded-full transition-all duration-200 ease-in-out w-full text-white font-bold hover:opacity-95 transform hover:scale-105",children:"delete"}),o&&Object(i.jsx)(X,{data:t,method:"put",closeModal:function(e){return function(e){s(e)}(e)}})]})]})})})),ee={getOwnedProducts:function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:P}),e.prev=1,e.next=4,j.a.get("/api/products/me");case 4:a=e.sent,t({type:_,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:R,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},te=Object(U.b)((function(e){return{productState:e.productState}}),ee)((function(e){var t=e.productState,a=e.getOwnedProducts;return Object(r.useEffect)((function(){a()}),[a]),t.loading?Object(i.jsx)(G,{}):Object(i.jsx)("div",{className:"grid grid-cols-5 gap-8",children:t.products.map((function(e){return Object(i.jsx)($,{data:e},e._id)}))})})),ae=function(e){e?(j.a.defaults.headers.common.access_token=e,localStorage.setItem("token",e)):(delete j.a.defaults.headers.common.access_token,localStorage.removeItem("token"))},re={login:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:y}),r={headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,j.a.post("/api/auth/login",e,r);case 5:n=t.sent,ae(n.data.token),a({type:f,payload:n.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),a({type:m,payload:t.t0});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()}},ne=Object(U.b)((function(e){return{authState:e.authState}}),re)((function(e){var t=e.closeModal,a=e.login,n=e.authState,c=Object(r.useRef)(null),o=Object(r.useState)({email:"",password:""}),s=Object(H.a)(o,2),l=s[0],u=s[1];Object(K.a)(c,(function(){t(!1)}));var b=function(){var e=Object(p.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,a(l);case 3:t(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){u(Object(W.a)(Object(W.a)({},l),{},Object(J.a)({},e.target.name,e.target.value)))};return n.loading?Object(i.jsx)(G,{}):Object(i.jsx)("div",{className:"fixed z-10 top-0 left-0 w-full h-full flex items-center justify-center bg-main bg-opacity-60",children:Object(i.jsxs)("div",{ref:c,className:"bg-white w-1/3 relative rounded-xl p-4",children:[Object(i.jsx)("div",{className:"text-main font-bold text-2xl",children:"Sign in"}),Object(i.jsxs)("form",{onSubmit:function(e){return b(e)},children:[Object(i.jsxs)("div",{className:"flex w-full flex-col items-center justify-between gap-4 mb-6",children:[Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"email",children:"Email"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"email",name:"email",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Email",value:l.email})]}),Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"password",children:"Password"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"password",name:"password",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Password",value:l.password})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",className:"border-main border-2 bg-main py-2 px-6 rounded-full transition-all duration-200 ease-in-out w-full text-white font-bold hover:opacity-95 transform hover:scale-105",children:"Login"})})]})]})})})),ce={register:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:y}),r={headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,j.a.post("/api/auth/register",e,r);case 5:n=t.sent,a({type:h,payload:n.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:x,payload:t.t0});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}},oe=Object(U.b)((function(e){return{authState:e.authState}}),ce)((function(e){var t=e.closeModal,a=e.register,n=e.authState,c=Object(r.useRef)(null),o=Object(r.useState)({email:"",password:"",confirmPassword:"",city:"",street:"",phoneNumber:"",lastName:"",firstName:""}),s=Object(H.a)(o,2),l=s[0],u=s[1];Object(K.a)(c,(function(){t(!1)}));var b=function(){var e=Object(p.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,a(l);case 3:t(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){u(Object(W.a)(Object(W.a)({},l),{},Object(J.a)({},e.target.name,e.target.value)))};return n.loading?Object(i.jsx)(G,{}):Object(i.jsx)("div",{className:"fixed z-10 top-0 left-0 w-full h-full flex items-center justify-center bg-main bg-opacity-60",children:Object(i.jsxs)("div",{ref:c,className:"bg-white w-1/3 relative rounded-xl p-4",children:[Object(i.jsx)("div",{className:"text-main font-bold text-2xl",children:"Register"}),Object(i.jsxs)("form",{onSubmit:function(e){return b(e)},children:[Object(i.jsxs)("div",{className:" space-y-4 mb-6",children:[Object(i.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[Object(i.jsxs)("div",{className:"w-1/2",children:[Object(i.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"text",name:"firstName",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"firstName",value:l.firstName})]}),Object(i.jsxs)("div",{className:"w-1/2",children:[Object(i.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"text",name:"lastName",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"lastName",value:l.lastName})]})]}),Object(i.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[Object(i.jsxs)("div",{className:"w-1/3",children:[Object(i.jsx)("label",{htmlFor:"phoneNumber",children:"Phone"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"number",name:"phoneNumber",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"phoneNumber",value:l.phoneNumber})]}),Object(i.jsxs)("div",{className:"w-1/3",children:[Object(i.jsx)("label",{htmlFor:"city",children:"City"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"text",name:"city",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"city",value:l.city})]}),Object(i.jsxs)("div",{className:"w-1/3",children:[Object(i.jsx)("label",{htmlFor:"street",children:"Street"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"text",name:"street",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"street",value:l.street})]})]}),Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"email",children:"Email"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"email",name:"email",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Email",value:l.email})]}),Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"password",children:"Password"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"password",name:"password",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Password",value:l.password})]}),Object(i.jsxs)("div",{className:"w-full",children:[Object(i.jsx)("label",{htmlFor:"password",children:"Confirm Password"}),Object(i.jsx)("input",{onChange:function(e){return j(e)},type:"password",name:"confirmPassword",className:"w-full border-black rounded focus:outline-none border-solid border py-2 px-4",placeholder:"Password",value:l.confirmPassword})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",className:"border-main border-2 bg-main py-2 px-6 rounded-full transition-all duration-200 ease-in-out w-full text-white font-bold hover:opacity-95 transform hover:scale-105",children:"Register"})})]})]})})})),se={getCategories:Q,logout:function(){return function(e){e({type:g})}}},ie=Object(U.b)((function(e){return{authState:e.authState,categoryState:e.categoryState}}),se)((function(e){var t=e.authState,a=e.getCategories,n=e.categoryState,c=e.logout,o=Object(M.g)();Object(r.useEffect)((function(){a(8)}),[a]);var l=Object(r.useState)(!1),u=Object(H.a)(l,2),d=u[0],p=u[1],b=Object(r.useState)(!1),j=Object(H.a)(b,2),f=j[0],m=j[1],h=Object(r.useState)(!1),x=Object(H.a)(h,2),O=x[0],v=x[1],g=Object(r.useState)(!1),y=Object(H.a)(g,2),w=y[0],N=y[1],S=Object(r.useState)(""),k=Object(H.a)(S,2),C=k[0],E=k[1],R=function(e){m(e),v(e)},_=Object(r.useRef)(null);return Object(K.a)(_,(function(){p(!1)})),Object(i.jsx)("header",{className:"pt-4 border-b-2 border-minor border-solid box-border",children:Object(i.jsxs)("div",{className:"container mx-auto",children:[Object(i.jsxs)("div",{className:"flex justify-between items-center gap-4 mb-5",children:[Object(i.jsx)(s.b,{to:"/",className:"text-primary font-bold text-4xl w-1/12",children:"BI3A"}),Object(i.jsxs)("div",{className:"focus-within:bg-main rounded-full focus-within:ring focus-within:ring-minor focus-within:ring-offset-2 transition-all duration-200 ease-in-out w-8/12",children:[Object(i.jsx)("input",{onChange:function(e){return E(e.target.value)},value:C,className:"border-2 border-r-0 border-solid border-main py-2 pl-4 pr-10 rounded-l-full focus:outline-none w-11/12",type:"text",placeholder:"search for something"}),Object(i.jsx)("button",{onClick:function(e){return o.push("/search?q=".concat(C))},className:"border-main border-2 border-l-0 hover:bg-gray-100 focus:bg-main py-2 px-6 rounded-r-full transition-all duration-200 ease-in-out w-1/12",children:Object(i.jsx)("i",{className:"fas fa-search text-minor"})})]}),t.isAuthenticated&&Object(i.jsx)("div",{onClick:function(e){return N(!0)},className:"hover:bg-gray-100 text-gray-800 focus:bg-gray-200 p-3 w-12 h-12 flex cursor-pointer justify-center items-center rounded-full transition-all duration-200 ease-in-out text-lg font-semibold text-center whitespace-nowrap",children:Object(i.jsx)("i",{className:"fas fa-plus"})}),t.isAuthenticated?Object(i.jsxs)("div",{ref:_,className:"relative cursor-pointer",children:[Object(i.jsxs)("div",{onClick:function(e){return p(!d)},className:"flex justify-start items-center gap-4",children:[Object(i.jsxs)("div",{className:"w-10 h-10 bg-primary text-sm text-main font-bold uppercase flex justify-center items-center rounded-full",children:[Object(i.jsx)("span",{children:t.user.firstName[0]}),Object(i.jsx)("span",{children:t.user.lastName[0]})]}),Object(i.jsxs)("div",{className:"capitalize font-semibold whitespace-nowrap",children:[t.user.firstName," ",t.user.lastName]})]}),d&&Object(i.jsxs)("div",{className:"w-full top-10 lef-0 shadow-md rounded-xl absolute z-10 bg-white",children:[t.user.isSeller&&Object(i.jsx)("div",{onClick:function(e){o.push("/seller/products")},className:"cursor-pointer text-center py-2 px-4 font-bold rounded-xl w-full",children:"Products"}),Object(i.jsx)("div",{className:"cursor-pointer text-center py-2 px-4 font-bold  rounded-xl",onClick:function(e){return c()},children:"Logout"})]})]}):Object(i.jsxs)("div",{className:"flex justify-between items-center w-4/12",children:[Object(i.jsx)("button",{onClick:function(e){return m(!0)},className:"hover:bg-gray-100 focus:bg-gray-200 py-2 px-6 rounded-full transition-all duration-200 ease-in-out w-1/2 text-sm font-semibold text-center whitespace-nowrap",children:"Sign in"}),Object(i.jsx)("button",{onClick:function(e){return v(!0)},className:"hover:bg-gray-100 focus:bg-gray-200 py-2 px-6 rounded-full transition-all duration-200 ease-in-out w-1/2 text-sm font-semibold text-center whitespace-nowrap",children:"Register"})]}),f&&Object(i.jsx)(ne,{closeModal:function(e){return R(e)}}),O&&Object(i.jsx)(oe,{closeModal:function(e){return R(e)}}),w&&Object(i.jsx)(X,{method:"post",closeModal:function(e){return function(e){N(e)}(e)}})]}),Object(i.jsx)("div",{className:"flex justify-between items-center gap-4",children:n.categories.map((function(e){return Object(i.jsx)(s.b,{to:"/search?category=".concat(e.name),className:"border-b capitalize hover:border-main cursor-pointer transition-all duration-200 ease-in-out delay-300 border-solid py-4 w-1/6 text-center",children:e.name},e._id)}))})]})})})),le=a(18),ue=a(39),de={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,err:{}},pe={categories:[],category:null,loading:!0,error:{}},be=a(29),je={products:[],product:null,loading:!0,error:{}},fe=Object(le.combineReducers)({authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case y:return Object(W.a)(Object(W.a)({},e),{},{loading:!0});case v:return Object(W.a)(Object(W.a)({},e),{},{isAuthenticated:!0,loading:!1,user:r.user});case f:return localStorage.setItem("token",r.token),Object(W.a)(Object(W.a)({},e),{},{user:r.user,token:r.token,loading:!1,isAuthenticated:!0});case h:return Object(W.a)(Object(W.a)({},e),{},{loading:!1});case O:case x:case m:case g:return localStorage.removeItem("token"),Object(W.a)(Object(W.a)({},e),{},{isAuthenticated:!1,token:null,loading:!1,err:r});default:return e}},productState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case k:var n=e.products.map((function(e){return e._id})).indexOf(r.product._id),c=e.products[n];return c=r.product,Object(W.a)(Object(W.a)({},e),{},{products:[].concat(Object(be.a)(e.products.filter((function(e){return e._id!==r.product._id}))),[c]),loading:!1});case D:return Object(W.a)(Object(W.a)({},e),{},{product:Object(W.a)(Object(W.a)({},e.product),{},{seller:Object(W.a)(Object(W.a)({},e.product.seller),{},{phoneNumber:r.seller.phoneNumber})}),loading:!1});case E:return Object(W.a)(Object(W.a)({},e),{},{products:[].concat(Object(be.a)(e.products),[r.product]),loading:!1});case P:return Object(W.a)(Object(W.a)({},e),{},{loading:!0});case _:case C:case w:case N:return Object(W.a)(Object(W.a)({},e),{},{products:r.products,loading:!1});case S:return Object(W.a)(Object(W.a)({},e),{},{product:r.product,loading:!1});case T:return Object(W.a)(Object(W.a)({},e),{},{products:e.products.filter((function(e){return e._id!==r.product._id})),loading:!1});case R:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,error:r});default:return e}},categoryState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case F:return Object(W.a)(Object(W.a)({},e),{},{loading:!0});case A:return Object(W.a)(Object(W.a)({},e),{},{categories:r.categories,loading:!1});case I:return Object(W.a)(Object(W.a)({},e),{},{loading:!1,error:r});default:return e}}}),me=a(40),he=[ue.a],xe=Object(le.createStore)(fe,{},Object(me.composeWithDevTools)(le.applyMiddleware.apply(void 0,he))),Oe=a(41),ve=["authState","component"],ge=Object(U.b)((function(e){return{authState:e.authState}}))((function(e){var t=e.authState,a=e.component,r=Object(Oe.a)(e,ve);return Object(i.jsx)(M.b,Object(W.a)(Object(W.a)({},r),{},{render:function(e){return t.loading?Object(i.jsx)(G,{}):t.isAuthenticated&&t.user.isSeller?Object(i.jsx)(a,Object(W.a)({},e)):Object(i.jsx)(M.a,{to:"/"})}}))})),ye={getProduct:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:P}),t.prev=1,t.next=4,j.a.get("/api/products/".concat(e));case 4:r=t.sent,a({type:S,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:R,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getSellerNumber:function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:P}),t.prev=1,t.next=4,j.a.get("/api/products/seller/".concat(e,"/number"));case 4:r=t.sent,a({type:D,payload:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:R,payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},we=Object(U.b)((function(e){return{productState:e.productState}}),ye)((function(e){var t,a,n,c,o,s,l,u,d=e.productState,p=e.getProduct,b=e.getSellerNumber,j=Object(M.i)().productId;return Object(r.useEffect)((function(){p(j)}),[p,j]),d.loading?Object(i.jsx)(G,{}):Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"flex justify-between items-start gap-20 w-full",children:[Object(i.jsx)("img",{className:"w-1/2",src:null===(t=d.product)||void 0===t?void 0:t.image,alt:""}),Object(i.jsxs)("div",{className:"w-1/2",children:[Object(i.jsx)("div",{className:"font-bold text-3xl capitalize mb-4",children:null===(a=d.product)||void 0===a?void 0:a.name}),Object(i.jsx)("div",{className:"mb-4",children:null===(n=d.product)||void 0===n?void 0:n.description}),Object(i.jsxs)("div",{className:"text-xl mb-4",children:[null===(c=d.product)||void 0===c?void 0:c.price," TND"]}),Object(i.jsxs)("div",{className:"uppercase mb-4",children:["By ",null===(o=d.product)||void 0===o?void 0:o.seller.firstName," ",null===(s=d.product)||void 0===s?void 0:s.seller.lastName]}),(null===(l=d.product)||void 0===l?void 0:l.seller.phoneNumber)?Object(i.jsx)("div",{children:null===(u=d.product)||void 0===u?void 0:u.seller.phoneNumber}):Object(i.jsx)("button",{onClick:function(e){return b(d.product.seller._id)},type:"submit",className:"border-main border-2 bg-main py-2 px-6 rounded-full transition-all duration-200 ease-in-out w-1/2 text-white font-bold hover:opacity-95 transform hover:scale-105",children:"Get Seller Number"})]})]}),Object(i.jsx)("div",{})]})}));var Ne=function(){return Object(r.useEffect)((function(){localStorage.token&&ae(localStorage.token),xe.dispatch(function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:y}),localStorage.token&&ae(localStorage.getItem("token")),e.prev=2,e.next=5,j.a.get("/api/auth/authcheck");case 5:a=e.sent,t({type:v,payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:O,payload:e.t0});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()),window.addEventListener("storage",(function(){localStorage.token||xe.dispatch({type:g})}))}),[]),Object(i.jsx)(U.a,{store:xe,children:Object(i.jsxs)(s.a,{children:[Object(i.jsx)(ie,{}),Object(i.jsxs)(M.d,{children:[Object(i.jsx)(M.b,{exact:!0,path:"/",component:z}),Object(i.jsx)(ge,{exact:!0,path:"/seller/products",component:te}),Object(i.jsx)(M.b,{exact:!0,path:"/search",component:q}),Object(i.jsx)(M.b,{exact:!0,path:"/products/:productId",component:we})]})]})})};o.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(Ne,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.61e1c699.chunk.js.map